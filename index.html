<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>FlickrFindr demonstrator</title>
    <link rel="stylesheet" type="text/css" href="flickrfindr.css">
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script src="https://raw.github.com/Pomax/FlickrFindr/master/flickrfindr.js"></script>
  </head>
  <body>
    <div id='FlickrFindrPane'>
      <div class='title'>
        Search <a href='//flickr.com'>Flickr</a> for pictures: <input class='tags' type='search' placeholder='by typing keywords here'>
        <span class='close'>X</span>
      </div>
      <div class='images'>
        <!-- this will contain the list of found images -->
      </div>
      <div class='imgCode'>
        <label>HTML code for the selected image:</label>
        <div>
          <!-- this will contain the html code for a selected image -->
        </div>
      </div>
    </div>
  </body>

   <script>
     var init = function() {
      document.removeEventListener("DOMContentLoaded",init,false);

        var flickrFindr = FlickrFindr({
          api_key: "7904ccdb3a9ff57189e5e545e4e8d709",
          template: $("#FlickrFindrPane"),
          filters: {
            license: "1,2,3,4,5,6", // CC-BY(-*) images
            content_type: 1,        // photos only, no screenshots
            media: "photos"         // photos, not video
          }
        });
        
        /**
         * what to do when there's search results
         */
        var showResults = function(finder) {
          window.console.log("lol");
          var contentPane = $("div.images", finder.template),
              entry, href, link, i, last;
          for(i=finder.lastCount, last=finder.entries.length; i<last; i++) {
            entry = finder.entries[i];
            link = document.createElement("span");
            link.appendChild(entry.img);
            link.title = entry.title;
            contentPane.append(link);
          }
          finder.moreOnScroll = true;
        };

        /**
         * bind show function as callback for "more results were retrieved" event
         */
        flickrFindr.setCallback(showResults);
      };
      document.addEventListener("DOMContentLoaded",init,false);
    </script>
 </html>
